{% load i18n %}
{% load url from future %}
{% load base_tags %}
{% load perm_tags %}


{% has_perm request.user site_settings.change_setting as can_edit_setting %}

{% if app_object %}
    {% has_perm request.user invoices.view_invoice app_object.invoice as can_view_invoice %}
{% endif %}


<ul class="dropdown-menu pull-left">
    <div class="yamm-content custom-yamm-content content-dropdown">
        {% if app_object %}
            {# "All Payments" Section #}
            <li class="heading">{% trans "All Payments" %}</li>
        {% endif %}

        <li class="content-item">
            <a href="{% url 'payment.search' %}">{% trans "Search Payments" %}</a>
        </li>

        {% if app_object %}
            {# End "All Payments" Section #}

            {% if can_view_invoice %}
                <li class="divider"></li>

                {# "This Payment" Section #}
                <li class="heading">{% trans "This Payment" %}</li>

                {% if can_view_invoice %}
                    <li class="content-item">
                        <a href="{# url 'invoice.view' app_object.invoice.pk #}">{% trans "View Invoice" %}</a>
                    </li>
                {% endif %}
            {% endif %}
        {% endif %}
    </div>
</ul>
