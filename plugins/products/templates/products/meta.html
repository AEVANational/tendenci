{% load base_filters %}
{% load base_tags %}
{% load product_tags %}
{% load perm_tags %}
{% load tagging_tags %}
{% load i18n %}

{% has_perm user products.change_product product as can_edit %}
{% has_perm user products.delete_product product as can_delete %}
{% tags_hash_tags product as hash_tags %}
{% tags_strip_hash product as nonhash_tags %}


            <div class="meta {% if not user.is_authenticated and not category and not nonhash_tags %}anon{% endif %}">
                <div class="meta-left">
                    {% if product.category %}
                    <div class="categories">
                        <strong>{% trans "Category:" %} </strong><a href="{% url products.search %}?q=category:{{ product.category }}">{{ product.category }}</a>
                    {% if product.subcategory %}
                        | <strong>{% trans "Sub Category:" %} </strong><a href="{% url products.search %}?q=subcategory:{{ product.subcategory }}">{{ product.subcategory }}</a>
                    {% endif %} 
                    </div>
                    {% endif %}
    
                    {% if nonhash_tags or hash_tags %}
                    <div class="tags">
                        {% if nonhash_tags or can_edit %}<strong>Tags: </strong>{% endif %}
                        {% for tag in nonhash_tags %}
                            <a href="{% url products.search %}?q=tag:{{ tag }}">{{ tag }}</a>{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                        
                        {% if hash_tags and can_edit %}
                        {% for tag in hash_tags %}
                            {% if forloop.first and nonhash_tags %}| {% endif %}<a href="{% url products.search %}?q=tag:{{ tag }}">{{ tag }}</a>{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                        {% endif %}
                    </div>
                    {% endif %}
                    
                    {% if user.is_authenticated %}
                    <div class="submitted">{% blocktrans with product.create_dt|date:"long" as create_date %}Created on {{ create_date }}
                    by:{% endblocktrans %} <a href="{{ product.creator.get_absolute_url }}">
                    {% if product.creator.first_name %}{{ product.creator.first_name }} {{ product.creator.last_name }}
                    {% else %}
                    {{ product.creator }}
                   {% endif %}</a>
                    </div>
                    {% endif %}
                    {% if user.is_authenticated %}
                    <div class="submitted">{% blocktrans with product.update_dt|date:"long" as update_date %}Last updated {{ update_date }}
                    by:{% endblocktrans %} <a href="{{ product.owner.get_absolute_url }}">
                    {% if product.owner.first_name %}{{ product.owner.first_name }} {{ product.owner.last_name }}
                    {% else %}
                    {{ product.owner }}
                   {% endif %}</a>
                    </div>
                    {% endif %}
                    
                </div>
                <div class="meta-right">
                    <a class="share-link" >{% trans "Share" %}</a>
                </div>
            </div>
            {% if can_edit %}
            <div class="editor-bar">

                <div class="perm-status">
                <ul>
                    <li>{{ product.obj_perms }}</li>
                    <li>{{ product.obj_status }}</li>
                </ul>
                </div>
                <div class="edit-links">
                <ul>
                    <li><a class="eventlog-link" href="{% url event_log.search %}?object_id={{ product.pk }}&source={{ product.opt_app_label }}">{% trans "Eventlogs" %}</a></li>
                    <li><a class="edit-link" href="{% url admin:products_product_change product.pk %}?next={{ request.path }}">{% trans "Edit" %}</a></li>
                    <li><a class="options-link" href="#">{% trans "Options" %} <small>&#9650;</small></a>
                    <div class="options-list">
                        <ul>
                        {% if can_delete %}
                        <li>
                            <a class="delete" href="{% url admin:products_product_delete product.pk %}">{% trans "Delete" %}</a>
                        </li>               
                        {% endif %}
                        
                            
                        </ul>
                    </div>
                    </li>
                </ul>
                </div>
            </div> 
            {% endif %}
â€‹