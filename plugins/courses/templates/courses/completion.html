{% extends "courses/base.html" %}
{% load courses_tags %}
{% load tagging_tags %}
{% load base_tags %}
{% load base_filters %}
{% load i18n %}

{% block title %}{{ course.title }}{% endblock %}

{% block extra_head %}
{{ block.super }}
{% endblock %}

{% block body %}
{% tags_for_object course as tags %}

<div class="t">
    {% course_nav request.user course %}
    <div class="course-wrap">
        <h1>{{ course.title }}</h1>
        <div class="status">
            <p>Passing Score: {{ course.passing_score }} %</p>
            {% if has_passed %}
                <p>
                    {% if for_admin %}
                        {{ attempts.0.user.get_full_name }} {% trans "has passed this course" %}.
                    {% else %}
                        {% trans "Congratulations! You've passed this course!" %}
                    {% endif %}
                    <a href="{% url courses.certificate course.pk %}">{% trans "View Certificate" %}</a>
                </p>
            {% else %}
                {% if for_admin %}
                    <p>{{ attempts.0.user.get_full_name }} {% trans "has not passed this course" %}.</p>
                {% else %}
                    <p>{% trans "Sorry, you have not passed this course yet." %}</p>
                    {% if can_retry %}
                        <a href="{% url courses.take course.pk %}">{% trans "Retry this Course" %}</a>
                    {% else %}
                        {% if retry_time_left %}
                            <p>{% trans "Try again on" %} {{ retry_time_left }}</p>
                        {% endif %}
                    {% endif %}
                {% endif %}
            {% endif %}
		</div>
		<div class="attempts">
            <h2>{% trans "Course Attempt History" %}</h2>
			{% for attempt in attempts %}
                <div class="attempt">
                    <p>
                        {% trans "Date" %}: {{ attempt.create_dt }}
                    </p>
                    <p>
                        {% trans "Score" %}: {{ attempt.score }} %
                    </p>
                    <p>
                        {% trans "Status" %}: {% if attempt.passed %}PASSED{% else %}FAILED{% endif %}
                    </p>
                </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
